<html> 
<head> 
<title> WebSockets Client</title> 
<script src='http://code.jquery.com/jquery-1.9.1.min.js'></script> 
</head> 
<body> 
<img id='live' src=''> 
  <div id = 'keypad'>
    <div id = 'krow1'>
    	<div id = 'up' class='key' style='width:50px; height:50px;margin-left:50px;' >
      		<img src = 'https://cdn-icons-png.flaticon.com/512/7860/7860593.png' style='transform:rotate(180deg);width:100%;'>
    	</div>
    </div>
    <div id = 'krow2'  style = 'overflow:hidden;'>
    	<div id = 'left' class='key' style='width:50px; height:50px;float:left;' >
    		<img src = 'https://cdn-icons-png.flaticon.com/512/7860/7860593.png' style='transform:rotate(90deg);width:100%;'>
    	</div>
    	<div id = 'right' class='key' style='width:50px; height:50px;float:left;margin-left:50px;' >
      		<img src = 'https://cdn-icons-png.flaticon.com/512/7860/7860593.png' style='transform:rotate(270deg);width:100%;'>
    	</div>
    </div>
    <div id = 'krow1'>
    	<div id = 'down' class='key' style='width:50px; height:50px;margin-left:50px;' >
    		<img src = 'https://cdn-icons-png.flaticon.com/512/7860/7860593.png' style='transform:rotate(0deg);width:100%;'>
    	</div>
	</div>
  </div>
</body> 
</html> 
<script> 
jQuery(function($){ 
if (!('WebSocket' in window)) { 
alert('Your browser does not support web sockets'); 
}else{ 
setup(); 
} 
function setup(){ 
var host = 'ws://server_ip:81'; 
var socket = new WebSocket(host); 
socket.binaryType = 'arraybuffer'; 
if(socket){ 
socket.onopen = function(){ 
} 
socket.onmessage = function(msg){ 
var bytes = new Uint8Array(msg.data); 
var binary= ''; 
var len = bytes.byteLength; 
for (var i = 0; i < len; i++) { 
binary += String.fromCharCode(bytes[i]) 
} 
var img = document.getElementById('live'); 
img.src = 'data:image/jpg;base64,'+window.btoa(binary); 
} 
socket.onclose = function(){ 
showServerResponse('The connection has been closed.'); 
} 
$('.key').mousedown(function(){
	if(socket.readyState === socket.OPEN){ // 연결 상태 확인
		socket.send($(this).attr('id')); // 웹소켓 서버에게 메시지 전송
    }else{
        alert('연결된 웹소켓 서버가 없습니다.');
    }
});
$('.key').mouseup(function(){
	if(socket.readyState === socket.OPEN){ // 연결 상태 확인
		socket.send('reset'); // 웹소켓 서버에게 메시지 전송
    }else{
        alert('연결된 웹소켓 서버가 없습니다.');
    }
});
$('.key').mouseout(function(){
	if(socket.readyState === socket.OPEN){ // 연결 상태 확인
		socket.send('reset'); // 웹소켓 서버에게 메시지 전송
    }else{
        alert('연결된 웹소켓 서버가 없습니다.');
    }
});
} 
} 
}); 

</script>